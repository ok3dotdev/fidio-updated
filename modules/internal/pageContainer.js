import React from"react";import Head from"next/head";import{useRouter}from"next/router";import resolveConfig from"/app.config";import{generateComponent,handlePropsPriority,resolvePage,resolveDefaults}from"/modules/utility.js";import{isObjectEmpty}from"/modules/util";import{constructGeneral,paintMeta}from"./meta/general";import middlewareFunctions from"/customModules/middleware/MiddlewareFunctions";import{SliderStyles,SliderTheme,GoogleFontsLink,PaystackScript}from"/modules/internal/localImports";import{UploadPage}from"/modules/video/upload";import{ArticlePage}from"/modules/article";const PageContainer=t=>{const a=useRouter(),{query:o,asPath:r}=a,[e,n]=React.useState(!1),[l,i]=React.useState({});t.resolvedDefinition;let s=resolvePage(resolveConfig(t._configVariables,t),t.path);s&&s.data;var c="/a"===s?.url||"/a"===a.pathname;const p=async e=>{var e=await resolveDefaults(s.url,t,t._configVariables,o,r,n,e,a?.pathname);isObjectEmpty(e)||(e=Object.assign({...t},e),i(e))};t._LocalEventEmitter.unsubscribe("refetchDefaults"),t._LocalEventEmitter.subscribe("refetchDefaults",e=>{p(!0)}),React.useEffect(()=>{s&&s.url&&!e&&isObjectEmpty(l)&&p()},[e,l,s]);var m=handlePropsPriority(l,t),u=(d=(s=resolvePage(resolveConfig(t._configVariables,m),m.path))&&s.data,generateComponent(d)),g=!d||d?.props&&!Object.prototype.hasOwnProperty.call(d.props,"useMenu")||d.props?.useMenu,d=!d||d?.props&&!Object.prototype.hasOwnProperty.call(d.props,"useAppConfigLayout")||d.props?.useAppConfigLayout;const f=Object.assign({},m);f.useMenu=g,f.useAppConfigLayout=d;g=React.createElement("div",{className:m.pageName+"_Body "+(t.pageClass??""),style:{top:m.menuConfig.height?m.menuConfig.height+"px":"",position:"relative"}},u),f.useAppConfigLayout&&(f.appConfigLayout=g),u=React.Children.map(t.children,function(e){return null!==e&&"function"==typeof e.type?React.cloneElement(e,f):React.createElement("div")}),g="/upload"===s?.url||"/upload"===a.pathname;let h=constructGeneral(a,f);return middlewareFunctions?.transformMeta&&(h=middlewareFunctions.transformMeta(a,h,f)),console.log("Article Page",c,"Upload Page",g,s),React.createElement(React.Fragment,null,React.createElement(Head,null,React.createElement("title",null,f.siteTitle),f?.googleClientId?React.createElement("meta",{name:"google-signin-client_id",content:""+f.googleClientId}):null,paintMeta(h),SliderStyles,SliderTheme,GoogleFontsLink,PaystackScript,React.createElement("link",{rel:"icon",href:"/favicon.ico"})),React.createElement("div",{className:c?"Article_SafeStyles":""},u,!s?.data&&g&&d?React.createElement("div",{className:m.pageName+"_Body "+(t.pageClass??""),style:{top:m.menuConfig.height?m.menuConfig.height+"px":"",position:"relative"}},React.createElement(UploadPage,f)):null,!s?.data&&c&&d?React.createElement("div",{className:m.pageName+"_Body "+(t.pageClass??""),style:{top:m.menuConfig.height?m.menuConfig.height+"px":"",position:"relative"}},React.createElement(ArticlePage,f)):null))};export default PageContainer;