import React from"react";import Head from"next/head";import{useRouter}from"next/router";import resolveConfig from"/app.config";import{generateComponent,handlePropsPriority,resolvePage,resolveDefaults}from"/modules/utility.js";import{isObjectEmpty}from"/modules/util";import{constructGeneral,paintMeta}from"./meta/general";import middlewareFunctions from"/customModules/middleware/MiddlewareFunctions";import{SliderStyles,SliderTheme,GoogleFontsLink,PaystackScript}from"/modules/internal/localImports";import{UploadPage}from"/modules/video/upload";const PageContainer=t=>{var e=useRouter();const{query:a,asPath:o}=e,[r,n]=React.useState(!1),[l,i]=React.useState({});t.resolvedDefinition;let s=resolvePage(resolveConfig(t._configVariables,t),t.path);s&&s.data;const c=async e=>{var e=await resolveDefaults(s.url,t,t._configVariables,a,o,n,e);isObjectEmpty(e)||(e=Object.assign({...t},e),i(e))};t._LocalEventEmitter.unsubscribe("refetchDefaults"),t._LocalEventEmitter.subscribe("refetchDefaults",e=>{c(!0)}),React.useEffect(()=>{s&&s.url&&!r&&isObjectEmpty(l)&&c()},[r,l,s]);var p=handlePropsPriority(l,t),m=(g=(s=resolvePage(resolveConfig(t._configVariables,p),p.path))&&s.data,generateComponent(g)),u=!g||g?.props&&!Object.prototype.hasOwnProperty.call(g.props,"useMenu")||g.props?.useMenu,g=!g||g?.props&&!Object.prototype.hasOwnProperty.call(g.props,"useAppConfigLayout")||g.props?.useAppConfigLayout;const d=Object.assign({},p);d.useMenu=u,d.useAppConfigLayout=g;var u=React.createElement("div",{className:p.pageName+"_Body "+(t.pageClass??""),style:{top:p.menuConfig.height?p.menuConfig.height+"px":"",position:"relative"}},m),m=(d.useAppConfigLayout&&(d.appConfigLayout=u),React.Children.map(t.children,function(e){return null!==e&&"function"==typeof e.type?React.cloneElement(e,d):React.createElement("div")})),u="/a"===s?.url||"/a"===e.pathname,f="/upload"===s?.url||"/upload"===e.pathname;let y=constructGeneral(e,d);return middlewareFunctions?.transformMeta&&(y=middlewareFunctions.transformMeta(e,y,d)),console.log("Article Page",u,"Upload Page",f,s),React.createElement(React.Fragment,null,React.createElement(Head,null,React.createElement("title",null,d.siteTitle),d?.googleClientId?React.createElement("meta",{name:"google-signin-client_id",content:""+d.googleClientId}):null,paintMeta(y),SliderStyles,SliderTheme,GoogleFontsLink,PaystackScript,React.createElement("link",{rel:"icon",href:"/favicon.ico"})),React.createElement("div",{className:u?"Article_SafeStyles":""},m,!s?.data&&f&&g?React.createElement("div",{className:p.pageName+"_Body "+(t.pageClass??""),style:{top:p.menuConfig.height?p.menuConfig.height+"px":"",position:"relative"}},React.createElement(UploadPage,d)):null))};export default PageContainer;