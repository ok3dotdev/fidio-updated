import{fetchPost}from"../fetch/fetch";import{logout}from"/modules/utility/onboarding/SignIn.js";import mails from"/layout/mail";import apiReq from"/modules/utility/api/apiReq";const sendSurveyEmail=async(t,e,i,a,n)=>{e={domainKey:e,hash:n?.hash,identifier:n?.identifier,answers:i,surveyName:a},n=await fetchPost(t+"/m/sendsurveyemail",null,null,e);if(n&&n.hasOwnProperty("status")){if("disauthenticated"==n.status)return logout(),"disauthenticated";if("failed"==n.status)return!1;if("success"==n.status)return n}return!1},handleEventMail=async(t,e)=>{var i,a=t?.event??t?.action??t?.detail?.event??null;if(a)try{mails&&mails[a]&&(i=await mails[a](e,t),console.log("Attempting to send",i),i)&&await apiReq("/email/sendEmail",{toEmail:i?.toEmail??null,toUserId:i?.toUserId??t?.data?.identifier,tousername:i?.toUsername??null,content:i.content,subject:i.subject})}catch(t){console.log(t)}};export{sendSurveyEmail,handleEventMail};