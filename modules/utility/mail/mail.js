import{fetchPost}from"../fetch/fetch";import{logout}from"/modules/utility/onboarding/SignIn.js";import mails from"/layout/mail";import apiReq from"/modules/utility/api/apiReq";const sendSurveyEmail=async(t,e,i,a,s)=>{e={domainKey:e,hash:s?.hash,identifier:s?.identifier,answers:i,surveyName:a},s=await fetchPost(t+"/m/sendsurveyemail",null,null,e);if(s&&s.hasOwnProperty("status")){if("disauthenticated"==s.status)return logout(),"disauthenticated";if("failed"==s.status)return!1;if("success"==s.status)return s}return!1},handleEventMail=async(t,e)=>{var i,a=t?.event??t?.action??null;if(a)try{mails&&mails[a]&&(i=mails[a](e),console.log("Attempting to send",i),i)&&await apiReq("/email/sendEmail",{toUserId:i?.toUserId??t?.data?.identifier,tousername:i?.toUsername??null,content:i.content,subject:i.subject})}catch(t){console.log(t)}};export{sendSurveyEmail,handleEventMail};