function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}import React from"react";import{useRouter}from"next/router";import{Profile}from"/layout";import ManagerStyles from"../streaming/manager/Manager.module.scss";const OPEN_PANEL_OFFSET=1e3,Module=a=>{const e=useRouter()["query"],[t,r]=React.useState(!1),[,o]=React.useState({}),[n,,]=React.useState([]),[i,s]=React.useState([]),[l,c]=React.useState(!1);var u=React.useRef(),m=(a._LocalEventEmitter.unsubscribe("profilePage"),a._LocalEventEmitter.subscribe("profilePage",e=>{e&&e.dispatch&&"openAdminPanel"===e.dispatch&&(c(!0),a._setManagerOpen(!0),"stream"===e?.menu&&a._LocalEventEmitter.dispatch("manager",{dispatch:"setMenu",menu:"stream"}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},1500))}),React.useEffect(()=>{t||("openbeginstream"!==e?.a&&"golive"!==e?.a||setTimeout(()=>{c(!0),a._setManagerOpen(!0),a._LocalEventEmitter.dispatch("manager",{dispatch:"setMenu",menu:"stream"}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},1500)},OPEN_PANEL_OFFSET),r(!0))},[t]),React.useEffect(()=>{var e,t;a?.profileData?.currentLive?(o(a.profileData.currentLive),s([a.profileData.currentLive].concat(n))):a?.profileData?.currentLive||(console.log("Remove"),t=(e=[...n]).findIndex(e=>e?.author===a?.profileData?.user?.id&&"live"===e?.status),console.log(t,e),-1<t&&e.splice(t,1),o({}),s(e))},[a.profileData,n]),a._loggedIn&&a._loggedIn.identifier&&a.profileData&&a.profileData.user&&a.profileData.user.id&&a._loggedIn.identifier===a.profileData.user.id),p=React.useCallback(e=>{let t=l;console.log(t),t?t=!1:(t=!0,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},1500)),c(t),a._setManagerOpen(t)},[l]);return React.useEffect(()=>{!1===a._managerOpen&&!0===l&&a._setManagerOpen(!0)},[l,a._managerOpen]),React.createElement("div",{className:""+a.className},React.createElement(Profile,_extends({},a,{adminAuth:m,combinedFeed:i,adminPanelState:l,toggleAdminPanel:p,adminPanelContainerRef:u,ManagerStyles:ManagerStyles})))};export default Module;